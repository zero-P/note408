## 计算机网络概述

### 计算机网络的概念

+ 计算机网络

  一个将众多分散的、自洽的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。

  由若干结点(node)和连接这些结点的链路(link)组成。网络中的结点可以是计算机、集线器、交换机或路由器等。

+ 互连网 internet

  一个通用名词，泛指由多个计算机网络互连而成的计算机网络。这些网络之间可以使用任意的通信协议作为通信规则，不一定非要使用 TCP/IP 协议。

+ 互联网/因特网 Internet

  一个专有名词，指当前全球最大的、开放的、由众多网络和路由器互连而成的特定计算机网络，采用 TCP/IP 协议族作为通信规则。

### 计算机网络的组成

+ 从组成部分看：

  计算机网络主要由 <u>硬件</u>、<u>软件</u>、<u>协议</u> 三大部分组成。

  1）硬件：主要由主机/端系统、通信链路（如双绞线、光纤）、交换设备（如路由器、交换机）和通信处理机（如网卡）等组成。

  2）软件：主要包括各种实现资源共享的软件和方便用户使用的各种工具软件（如 E-mail 程序、FTP 程序、聊天程序等）。

  3）协议：计算机网络的核心，规定了网络传输数据时所遵循的规范。

+ 从工作方式看：

  计算机网络（主要指互联网）可分为 <u>边缘部分</u> 和 <u>核心部分</u>。

  1）边缘部分：由所有连接到互联网上的供用户直接使用的主机组成，用来通信和资源共享。

  2）核心部分：由大量网络和连接这些网络的路由器组成，为边缘部分提供连通性和交换服务。

  <div align=left><img src="https://pic-zerooo.oss-cn-beijing.aliyuncs.com/ungee/image-20240402173448624.png" width="400px"/></dev>

+ 从功能组成看：

  计算机网络由 <u>通信子网</u> 和 <u>资源子网</u> 组成。

  通信子网：由各种传输介质、通信设备和相应的网络协议组成。它使网络具有数据传输、交换、控制和存储的能力，实现联网计算机之间的数据通信。

  资源子网：是实现资源共享功能的设备及其软件的集合，向网络用户提供共享其他计算机上的硬件资源、软件资源和数据资源的服务。

### 计算机网络的功能

主要有以下五大功能:muscle:：

1. 数据通信（最基本、最重要:fire:）

   用来实现联网计算机之间各种信息的传输，并联系分散在不同地理位置的计算机，进行统一的调配、控制和管理。

2. 资源共享

   包括 <u>软件</u>共享、<u>硬件</u>共享、<u>数据</u>共享。

   使计算机网络中的资源互通有无、分工协作，从而极大地提高了软件资源、硬件资源和数据资源的利用率。

3. 分布式处理

   当计算机网络中的某个计算机系统负荷过重时，可将其处理的某个复杂任务分配给网络中的其他计算机系统，从而利用空闲计算机资源来提高整个系统的利用率。

4. 提高可靠性

   计算机网络中的各台计算机可以通过网络互为替代机。

5. 负载均衡

   将工作任务均衡地分配给计算机网络中的各台计算机。

除了以上几大主要功能，计算机网络还可以实现电子化办公与服务、远程教育、娱乐等功能。

## 数据交换方式

### 电路交换

<div align=left><img src="https://pic-zerooo.oss-cn-beijing.aliyuncs.com/ungee/image-20240402194828112.png" width="500px"/></dev>

最典型的电路交换网是传统电话网，如上图所示。

从通信资源分配的角度看，<u>交换</u> 就是按照某种方式动态地分配传输线路的资源。

电路交换分为三步：连接建立、数据传输、连接释放。在进行数据传输前，两个结点之间必须先建立一条专用（双方独占）的**物理**通信路径（由通信双方之间的交换设备和链路逐段连接而成），该路径可能经过许多中间结点。在数据传输过程中，这一物理通信路径始终被用户独占，直到通信结束后才被释放。

电路建立后，除源结点和目的结点外，电路上的任何结点都采取“直通方式”收发数据，即不存在存储转发所耗费的时间。

电路交换技术的优点:sunglasses:：

1. 通信时延小（线路专用，数据直达，传输时延非常小）。
2. 有序传输（双方通信时按发送顺序传送数据，不存在失序问题）。
3. 没有冲突（不会出现争用物理信道的问题）。
4. 适用范围广（模拟信号:white_check_mark: 数字信号:white_check_mark:）。
5. 实时性强（物理线路一旦建立，双方就可随时通信）。
6. 控制简单（交换设备及控制均较简单）。

电路交换技术的缺点:dizzy_face:：

1. 建立连接时间长。
2. 线路利用率低。
3. 灵活性差（物理通路单点故障后必须重新拨号建立新的连接·）。
4. 难以规格化（不同类型、不同规格、不同速率的终端很难相互进行通信）。
5. 难以实现差错控制（中间结点不具备存储和检验数据的能力，无法检错纠错）。

### 报文交换

数据交换的单位是 <u>报文(message)</u>，用户数据加上源地址、目的地址等信息后，封装成报文。

采用 <u>存储转发技术</u>：整个报文先传送到相邻的结点，全部存储后查找转发表，转发到下一个结点，如此重复，直至到达目的结点。每个报文都可单独选择到达目的结点的路径。

报文交换技术的优点:sunglasses:：

1. 无序建立连接（没有建立连接时延，用户可随时发送报文）。
2. 动态分配线路。
3. 线路可靠性高（若某条传输路径发生故障，则可重新选择另一条路径传输数据）。
4. 线路利用率高（报文在哪段链路上传送时才占用这段链路的通信资源）。
5. 提供多目标服务（一个报文可以同时发送给多个目的地址）

报文交换技术的缺点:dizzy_face:：

1. 转发时延高（交换结点要将报文整体接收完后，才能查找转发表转发到下一个结点）。
2. 缓存开销大（报文大小无限制，这就要求交换结点要拥有较大的缓存空间）。
3. 错误处理低效（长报文出错概率相对更大，重传代价也很大）。

### 分组交换

分组交换也采用 <u>存储转发技术</u>，但解决了报文交换中报文过长的问题。

源结点在发送之前，先把较长的报文划分成若干较小的等长数据段，在每个数据段前面添加一些由必要控制信息（如源地址、目的地址和编号信息等）组成的 <u>首部</u>，构成 <u>分组(Packet)</u>。

源结点将分组发送到分组交换网中，分组交换网中的分组交换机收到一个分组后，先将其缓存，然后从其首部中提取目的地址，据此查找自己的转发表，再后将分组转发给下一个分组交换机。经过多个分组交换机的存储转发后，分组最终到达目的结点。

分组交换技术的优点:sunglasses:：

1. 无建立时延。
2. 线路利用率高（特别是传送突发式的计算机数据）。
3. 相对于报文交换，简化了存储管理（因为分组长度固定，相应缓冲区的大小也固定，在交换结点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易）。
4. 加速传输（分组是逐个传输的，可以使后一个分组的存储操作与前一个分组的转发操作并行，这种**流水线方式**:construction_worker:减少了报文的**<u>传输时间</u>**。此外，传输一个分组比传输一次报文所需的缓冲区小得多，这样因缓冲区不足而等待发送的概率及时间必然也少得多）。
5. 减小了出错概率和重发数据量（因为分组较短），提高了可靠性并减小了传输时延。

分组交换技术的缺点:dizzy_face:：

1. 存在存储转发时延，且其结点交换机必须具有更强的处理能力。
2. 需要传输额外的信息量，进而使得控制复杂，降低了通信效率，增大了处理时延。
3. 当分组交换网采用数据报服务时，可能出现失序、丢失或重复分组的情况，分组到达目的结点时，要对分组按编号进行排序等工作，而这些工作很麻烦。若采用虚电路服务，虽然没有失序问题，但有呼叫建立、数据传输和虚电路释放三个过程。

注意:warning:：分组交换对报文交换改进（传输单位更小且有固定的最大长度）的**直接结果**是**<u>减少了传输时延</u>**。​

------

三种数据交换方式的比较:racehorse:

<div align=left><img src="https://pic-zerooo.oss-cn-beijing.aliyuncs.com/ungee/image-20240405162224941.png" width="600px"/></dev>

当要传送的数据量很大且其传送时间远大于呼叫时间时，采用电路交换较为合适。

当端到端的通路由多段链路组成时，采用分组交换传送数据较为合适。

从提高整个网络的信道利用率看，报文交换和分组交换由于电路交换，其中分组交换比报文交换的时延小，尤其适合计算机之间的突发式数据通信。

## 计算机网络的分类

### 按分布范围分类

+ 广域网 WAN

  是互联网的核心部分。

  任务:clipboard:：提供长距离通信，运送主机发送的数据。

  覆盖范围：通常是直径为几十到几千千米的区域。

  连接广域网的各结点交换机的链路一般都是高速链路（**发送速率高**），具有较大的通信容量。

+ 城域网 MAN

  覆盖范围：可以跨越几个街区甚至整个城市，覆盖区域的直径为 5~50 km。

  大多采用**以太网技术**，因此有时也常并入局域网的范围讨论（可视为多个局域网互连的局域网）。

+ 局域网 LAN

  一般用主机通过高速线路相连。

  覆盖范围：较小，通常是直径为几十到几千米的区域。

  传统上，局域网使用广播技术，广域网使用交换技术。

+ 个人区域网 PAN / 无线个人区域网 WPAN

  指在个人工作的地方将消费电子设备用**<u>无线</u>**技术连接起来的网络。

注意:warning:

1. 区别局域网和广域网的关键在于协议，而非覆盖范围。
2. 若中央处理器之间的距离非常近（如近 1m 的数量级或甚至更小），则一般称为多处理器系统，而不称为计算机网络。

### 按传输技术分类

+ 广播式网络

  所有联网计算机都共享一个公共通信信道。

  当一台计算机利用共享通信信道发送报文分组时，所有其他计算机都会“收听”到这个分组。接收到该分组的计算机将通过检查目的地址来决定是否接收该分组。

  局域网基本上都采用广播式通信技术，广域网中的无线、卫星通信网络也采用广播式通信技术。

+ 点对点网络

  每条物理线路连接一对计算机。若通信的两台主机之间没有直接连接的线路，则它们之间的分组传输就要通过中间结点进行存储和转发，直至目的结点。

注意:warning:：是否采用分组存储转发与路由选择机制是点对点式网络与广播式网络的重要区别。广域网**基本**都属于点对点网络。​

### 按拓扑结构分类

<u>网络拓扑结构</u>：指由网中结点（路由器、主机等）与通信线路之间的几何关系表示的网络结构，主要指**通信子网**的拓扑结构。

<div align=left><img src="https://pic-zerooo.oss-cn-beijing.aliyuncs.com/ungee/image-20240405171129574.png" width="700px"/></dev>

+ 总线形网络

  用单根传输线把计算机连接起来。

  优点:sunglasses:：建网容易、增/减结点方便、节省线路。

  缺点:dizzy_face:：重负载时通信效率不高、总线任意一处对故障敏感。

+ 星形网络

  每个终端或计算机都以单独的线路与中央设备相连。

  中央设备一般是交换机或路由器。

  优点:sunglasses:：便于集中控制和管理。

  缺点:dizzy_face:：成本高、中央设备对故障敏感。

+ 环形网络

  所有计算机接口设备连接成一个环。

  最典型例子是令牌环局域网。

  环既可以是单环，又可以是双环。

  环中信号是**单向**传输:arrow_right:的。

+ 网状网络

  一般情况下，每个结点至少有两条路径与其他结点相连。

  多用在广域网中。

  有 <u>规则型</u> 和 <u>非规则型</u> 两种。

  优点:sunglasses:：可靠性高。

  缺点:dizzy_face:：控制复杂、线路成本高。

以上 4 种基本的网络拓扑结构可以互连为更复杂的网络。

> 星形、总线形和环形网络多用于局域网，网状网络多用于广域网。

### 按使用者分类

+ 公用网

  指电信公司出资建造的大型网络。

  “公用”的意思是指所有愿意按电信公司的规定缴纳费用的人都可使用这种网络。

+ 专用网

  指某个部门为满足本单位特殊业务的需要而建造的网络。

  这种网络不向本单位外的人提供服务，如铁路、电路、军队等部分的专用网。

### 按传输介质分类

传输介质可分为有线和无线两大类，因此网络可分为有线网络和无线网络。

+ 有线网络

  可分为双绞线网络、同轴电缆网络等。

+ 无线网络

  可分为蓝牙、微波、无线电等类型。

## 计算机网络的性能指标

+ 速率 Speed / 数据传输速率 / 数据传输率 / 数据率 / 比特率

  连接到网络上的结点在**<u>数字信道</u>**上传送数据的速率。
  
+ 带宽 Bandwidth

  原本表示通信线路允许通过的信号频率范围，单位 Hz。但在计算机网络中，带宽表示网络的通信线路所能传送数据的能力，是<u>**数字信道**</u>所能传送的“**最高**数据传输速率”的同义语。

+ 吞吐量 Throughput

  指单位时间内通过某个网络（或信道、接口）的实际数据量。

  吞吐量常用在对实际网络的测量中，受网络带宽的限制。

+ 时延 Delay

  指数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需的总时间。

  它由 4 部分构成：发送时延、传播时延、处理时延、排队时延。

  1）<u>发送时延</u>/<u>传输时延</u>：结点将分组的所有比特推向链路所需的时间。即从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需的时间。发送时延 = 分组长度 / 发送速率。

  2）<u>传播时延</u>：电磁波在信道（传输介质）中传播一定的距离所花的时间，即一个比特从链路的一端传播到另一端所需的时间。传播时延 = 信道长度 / 电磁波在信道上的传播速率。

  3）<u>处理时延</u>：数据在交换结点为存储转发而进行的一些必要处理所花的时间。例如，分析分组的首部、从分组中提取数据、差错检验或查找合适的路由等

  4）<u>排队时延</u>：分组在进入路由器后要先在输入队列中排队等待处理。路由器确定转发端口后，还要在输出队列中等待转发。这就产生了排队时延。

  因此，数据在网络中经历的总时延就是以上 4 部分时延之和：总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延。

  注意:warning:：​除非另有说明，处理时延和排队时延通常可忽略不计。
  
+ 时延带宽积

  指发送端发送的第一个比特即将到达终点时，发送端已发出了多少比特。

  又称 <u>以比特为单位的链路长度</u>，即 时延带宽积 = **<u>传播时延</u>** × 信道带宽。

  考虑一个代表链路的圆柱形管道，其长度表示链路的传播时延，横截面积表示链路带宽，则时延带宽积表示该管道可以容纳的比特数量

  <div align=left><img src="https://pic-zerooo.oss-cn-beijing.aliyuncs.com/ungee/image-20240407151112740.png" width="380px"/></dev>

+ 往返时延 RTT (Round-Trip Time)

  指从发送端发出一个短分组，到发送端收到来自接收端的确认（接收端收到数据后立即发送确认）总共经历的时延。

  在互联网中，往返时延还包括各中间结点的处理时延、排队时延及转发数据时的发送时延。

+ 信道利用率

  用以指出某个信道有百分之多少的时间是有数据通过的。

  信道利用率 = 有数据通过时延 / (有+无)数据通过时间。

## 刷题总结

+ 分组交换网，